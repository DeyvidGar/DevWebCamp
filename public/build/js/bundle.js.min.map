{"version":3,"sources":["app.js","horas.js","ponentes.js","tags.js"],"names":["alerta","document","querySelector","setTimeout","remove","dias","querySelectorAll","categoria","inputHiddenDias","inputHiddenHoras","addEventListener","llenarBusqueda","forEach","dia","busqueda","categoria_id","value","dia_id","e","target","name","parseInt","seleccionada","classList","Object","values","includes","buscarEventos","async","url","resultadoConexion","fetch","eventos","listadoHoras","hora","add","removeEventListener","seleccionarHora","idHorasDisponibles","map","evento","hora_id","listadoHorasArray","Array","from","filter","dataset","horaId","habilitarLI","obtenerHorasDisponibles","json","li","id","horaSeleccionada","onclick","ponentesInput","ponentes","ponentesFiltrando","listadoPonentes","ponenteHidden","formatearPonentes","arrayPonentes","ponente","nombre","trim","apellido","limpiarPonentes","firstChild","removeChild","seleccionarPonente","ponenteSeleccionado","ponenteId","obtenerPonentes","input","length","exprecion","RegExp","toLowerCase","search","ponenteLI","createElement","textContent","appendChild","noPonentes","mostrarPonentes","tagInput","divTags","inputHiddenTags","tags","split","mostrarTags","tag","listado","eliminarTag","actulaizarInputHidden","toString","lastChild","keyCode","preventDefault"],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){\r\n    const alerta = document.querySelector('.alerta');\r\n    if(alerta){\r\n        setTimeout(() => {\r\n            alerta.remove();\r\n        }, 3000);\r\n    }\r\n})();","(function(){\r\n    const horas = document.querySelector('#horas');\r\n    if(horas){\r\n        const dias = document.querySelectorAll('[name=\"dia_id\"]');\r\n        const categoria = document.querySelector('[name=\"categoria_id\"]');\r\n        const inputHiddenDias = document.querySelector('#dia_id');\r\n        const inputHiddenHoras = document.querySelector('[name=\"hora_id\"]');\r\n\r\n        categoria.addEventListener('change', llenarBusqueda);\r\n        dias.forEach(dia => dia.addEventListener('change', llenarBusqueda));\r\n\r\n        //crear objeto en memoria para almacenar los objetos que queremos hacer interactivos\r\n        let busqueda = {\r\n            //el nombre debe ser el mismo que esta en el name del formulario\r\n            categoria_id: +categoria.value || '', // (+) convierte a numero / (||) es un placeholder\r\n            dia_id: document.querySelector('[name=\"dia_id\"]:checked') ? +document.querySelector('[name=\"dia_id\"]:checked').value : ''\r\n        }\r\n\r\n        // en caso de que el objeto contenga valores debemos de mostrar los horarios diponibles\r\n        if(!Object.values(busqueda).includes('')){\r\n            // POR QUE ASYNC: la funcion buscarEventos esta ejecutando las lineas donde pone la clase de desabilitado mientras nosotros la queremos quitar en la hora que pertenece a nuestro evento\r\n            //con await esperamos a que termite de ejecutar la funcion de buscarEvento y funciones que se unen a esa para despues ejecutar las siguientes lineas\r\n            (async () => {\r\n                await buscarEventos();\r\n\r\n                //seleccionar la hora del registro\r\n                const id = inputHiddenHoras.value;\r\n                if(!id) return;\r\n                const horaSeleccionada = document.querySelector(`[data-hora-id=\"${id}\"]`);\r\n                horaSeleccionada.classList.remove('horas__hora--desabilitado');\r\n                horaSeleccionada.classList.add('horas__hora--seleccionado');\r\n                horaSeleccionada.onclick = seleccionarHora;\r\n            })();\r\n        }\r\n\r\n            function llenarBusqueda(e){\r\n                busqueda[e.target.name] = parseInt(e.target.value);\r\n\r\n            // para que se actualizen los campos con cada cambio en el campo check y select debemos: reiniciar campos ocultos y borrar el campo seleccionado\r\n            // Reiniciar los campos ocultos\r\n            inputHiddenDias.value = '';\r\n            inputHiddenHoras.value = '';\r\n             //borrar si existe una seleccionada, ya que solo puede seleccionar una\r\n             const seleccionada = document.querySelector('.horas__hora--seleccionado');\r\n             if(seleccionada) seleccionada.classList.remove('horas__hora--seleccionado');\r\n\r\n            // con Object.values obtenemos un arreglo con solo los valores del objeto, includes obtiene si alguno esta vacio\r\n            if(Object.values(busqueda).includes('')) return;\r\n            buscarEventos();\r\n        }\r\n\r\n        async function buscarEventos() {\r\n            const { dia_id, categoria_id } = busqueda;\r\n            const url = `/api/eventos-horario?dia_id=${dia_id}&categoria_id=${categoria_id}`;\r\n\r\n            const resultadoConexion = await fetch(url);\r\n            const eventos = await resultadoConexion.json();//eventos disponibles dependiendo los valores del objeto de busqueda\r\n\r\n            obtenerHorasDisponibles(eventos);\r\n        }\r\n\r\n        function obtenerHorasDisponibles(eventos) {\r\n            //reiniciar las horas, desabilitamos todas las horas para posteriormente quitarle a las disponibles\r\n            const listadoHoras = document.querySelectorAll('#horas LI');\r\n            listadoHoras.forEach( hora => {\r\n                hora.classList.add('horas__hora--desabilitado');\r\n                hora.removeEventListener('click', seleccionarHora);\r\n                }\r\n            );\r\n\r\n            // obtener solo las horas que ya estan registradas en la base de datos pendiendo del dia y categoria del evento\r\n            const idHorasDisponibles = eventos.map(evento => evento.hora_id);\r\n            // FILTER sirve para obtener ciertos valores en un arreglo, dado que este no es un arreglo debemos hacer lo siguiente\r\n            const listadoHorasArray = Array.from(listadoHoras);\r\n\r\n            // obtener y habilitar solo las horas que no estan ocupadas para esta categoria y dia del evento\r\n            const habilitarHorasId = listadoHorasArray.filter( hora => !idHorasDisponibles.includes(hora.dataset.horaId));\r\n            habilitarHorasId.forEach( habilitarLI => habilitarLI.classList.remove('horas__hora--desabilitado') );\r\n\r\n            const horasDisponibles = document.querySelectorAll('#horas LI:not(.horas__hora--desabilitado)'); //el evento no aplica para los LI desabilitados\r\n            horasDisponibles.forEach(hora => hora.addEventListener('click', seleccionarHora) );\r\n\r\n        }\r\n\r\n        function seleccionarHora(e){\r\n            //borrar si existe una seleccionada, ya que solo puede seleccionar una\r\n            const seleccionada = document.querySelector('.horas__hora--seleccionado');\r\n            if(seleccionada) seleccionada.classList.remove('horas__hora--seleccionado');\r\n\r\n            // mostrar seleccionado\r\n            const li = e.target;\r\n            li.classList.add('horas__hora--seleccionado');\r\n            // console.log(e.target.dataset.horaId); id del registro\r\n            inputHiddenHoras.value = li.dataset.horaId;\r\n            inputHiddenDias.value = document.querySelector('[name=\"dia_id\"]:checked').value;\r\n        }\r\n    }\r\n})();","(function(){\r\n    const ponentesInput = document.querySelector('#ponente');\r\n    if(ponentesInput){\r\n        let ponentes = [];\r\n        let ponentesFiltrando = [];\r\n\r\n        const listadoPonentes = document.querySelector('#listado-ponentes');\r\n        const ponenteHidden = document.querySelector('[name=\"ponente_id\"]');\r\n\r\n        obtenerPonentes();\r\n        ponentesInput.addEventListener('input', leerInput);\r\n\r\n        async function obtenerPonentes(){\r\n            const url = `/api/ponentes`;\r\n            const resultadoConexion = await fetch(url);\r\n            const ponentes = await resultadoConexion.json();\r\n\r\n            formatearPonentes(ponentes);\r\n        }\r\n\r\n        function formatearPonentes(arrayPonentes = []){\r\n            ponentes = arrayPonentes.map( ponente => {\r\n                return {\r\n                    nombre: `${ponente.nombre.trim()} ${ponente.apellido.trim()}`,\r\n                    id: ponente.id\r\n                }\r\n            })\r\n        }\r\n\r\n        function leerInput(e) {\r\n            const input = e.target.value;\r\n            if(input.length > 3) {\r\n                // esta exprecion regula busca un patron y con la flag \"i\" le decimos que busque sin importar mayusculas o minusculas\r\n                // la exprecion con le metodo .search() retorna 0 si encuentra la similitud en caso contrario el valor da -1\r\n                const exprecion = new RegExp(input, \"i\");\r\n                ponentesFiltrando = ponentes.filter( ponente => {\r\n                    //filtramos por cada ponenete, si el nombre del ponente con la funcion de exprecion regular da un valor diferente a -1 es decir 0 signidica que encontro las coincidencias por lo tanto lo almacena en el arreglo\r\n                    if(ponente.nombre.toLowerCase().search(exprecion) != -1)\r\n                        return ponente\r\n                });\r\n\r\n                mostrarPonentes();\r\n            } else {\r\n                ponentesFiltrando = [];\r\n                limpiarPonentes();\r\n            }\r\n        }\r\n\r\n        function mostrarPonentes(){\r\n            limpiarPonentes();\r\n            if(ponentesFiltrando.length > 0){\r\n                ponentesFiltrando.forEach( ponente => {\r\n                    const ponenteLI = document.createElement('LI');\r\n                    ponenteLI.classList.add('listado-ponentes__ponente');\r\n                    ponenteLI.textContent = ponente.nombre;\r\n                    ponenteLI.dataset.ponenteId = ponente.id;\r\n                    ponenteLI.onclick = seleccionarPonente;\r\n                    listadoPonentes.appendChild(ponenteLI);\r\n                });\r\n            } else {\r\n                const noPonentes = document.createElement('P');\r\n                noPonentes.classList.add('listado-ponentes__no-ponentes');\r\n                noPonentes.textContent = 'No se encontro ponente.';\r\n                listadoPonentes.appendChild(noPonentes);\r\n            }\r\n        }\r\n\r\n        function limpiarPonentes(){\r\n            while(listadoPonentes.firstChild){\r\n                listadoPonentes.removeChild(listadoPonentes.firstChild);\r\n            }\r\n        }\r\n\r\n        function seleccionarPonente(e){\r\n            const ponente = e.target;\r\n            //remover clase si existe\r\n            const ponenteSeleccionado = document.querySelector('.listado-ponentes__ponente--seleccionado');\r\n            if(ponenteSeleccionado) ponenteSeleccionado.classList.remove('listado-ponentes__ponente--seleccionado');\r\n\r\n            ponente.classList.add('listado-ponentes__ponente--seleccionado');\r\n\r\n            ponenteHidden.value = ponente.dataset.ponenteId;\r\n        }\r\n    }\r\n})();","(function(){\r\n    const tagInput = document.querySelector('#tags_input');\r\n    if(tagInput){\r\n        const divTags = document.querySelector('#tags');\r\n        const inputHiddenTags = document.querySelector('[name=\"tags\"]');\r\n        //para no resetear los valores cuando envia datos\r\n        const valoresTemporales = inputHiddenTags.value === '' ? [] : inputHiddenTags.value.split(',');\r\n        let tags = valoresTemporales;\r\n        mostrarTags();\r\n\r\n        tagInput.addEventListener('keypress', guardarTag)\r\n        function guardarTag(e){\r\n            //keycode lee el valor ingresado en el teclado 13 es la tecla enter y 44 la coma\r\n            if(e.keyCode === 13 || e.keyCode === 44){\r\n                //prevenimos que el usuario envie el formualrio o que ingrese un valor\r\n                e.preventDefault();\r\n                //si el input esta vacio nos salimos de la funcion\r\n                if(e.target.value.trim() === '' || e.target.value < 1) return;\r\n\r\n                //el arrelo tiene una copia del arreglo actual y almacena el valor del input\r\n                tags = [...tags, e.target.value.trim()];\r\n\r\n                tagInput.value = '';\r\n                mostrarTags();\r\n                actulaizarInputHidden();\r\n            }\r\n        }\r\n\r\n        function mostrarTags(){\r\n            divTags.textContent = '';\r\n            tags.forEach(tag => {\r\n                const listado = document.createElement('LI');\r\n                listado.classList.add('formulario__tag');\r\n                listado.textContent = 'x';\r\n                listado.onclick = eliminarTag;\r\n                const nombre = document.createElement('SPAN');\r\n                nombre.textContent = tag;\r\n                listado.appendChild(nombre);\r\n                divTags.appendChild(listado);\r\n            })\r\n        }\r\n\r\n        function actulaizarInputHidden(){\r\n            //convertimos el arrglo en un string\r\n            inputHiddenTags.value = tags.toString();\r\n        }\r\n\r\n        function eliminarTag(e){\r\n            //eliminamos el elemento que targete el evento e en escaso es LI\r\n            e.target.remove();\r\n            //con filter, obtenemos los valores del arreglo que sean diferentes de el que targetemos\r\n            tags = tags.filter(tag => tag !== e.target.lastChild.textContent);\r\n            actulaizarInputHidden();\r\n            mostrarTags();\r\n        }\r\n    }\r\n})()"]}